# ğŸ“‹ GitHub Actions å·¥ä½œæµè¯´æ˜æ–‡æ¡£

> æœ¬é¡¹ç›®çš„ CI/CD è‡ªåŠ¨åŒ–æµç¨‹å®Œå…¨æŒ‡å—

---

## ğŸ¯ ä»€ä¹ˆæ˜¯å·¥ä½œæµï¼ˆWorkflowï¼‰ï¼Ÿ

**å·¥ä½œæµ**æ˜¯ GitHub Actions çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµç¨‹çš„å®šä¹‰æ–‡ä»¶ã€‚

### ğŸ“ å·¥ä½œæµæ–‡ä»¶ä½ç½®

```
.github/workflows/         # å›ºå®šç›®å½•åï¼ŒGitHubä¼šè‡ªåŠ¨è¯†åˆ«
â”œâ”€â”€ ci.yml                # ä¸»CI/CDå·¥ä½œæµ
â””â”€â”€ publish-report.yml    # æµ‹è¯•æŠ¥å‘Šå‘å¸ƒå·¥ä½œæµ
```

**é‡è¦è§„åˆ™ï¼š**
- âœ… æ‰€æœ‰æ”¾åœ¨ `.github/workflows/` ç›®å½•ä¸‹çš„ `.yml` æˆ– `.yaml` æ–‡ä»¶éƒ½ä¼šè¢«GitHubè¯†åˆ«ä¸ºå·¥ä½œæµ
- âœ… æ¯ä¸ªæ–‡ä»¶å®šä¹‰ä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œæµ
- âœ… å·¥ä½œæµä¹‹é—´å¯ä»¥ç›¸äº’è§¦å‘å’Œä¾èµ–
- âœ… æ–‡ä»¶åå¯ä»¥ä»»æ„å–ï¼ŒGitHubæ ¹æ®æ–‡ä»¶å†…å®¹è¯†åˆ«

---

## ğŸ“Š æœ¬é¡¹ç›®çš„å·¥ä½œæµæ¶æ„

```
è§¦å‘äº‹ä»¶ (push/PR/æ‰‹åŠ¨)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥ä½œæµ1: C++ CI/CD Pipeline           â”‚
â”‚  æ–‡ä»¶: ci.yml                          â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Job 1: build-and-test            â”‚ â”‚
â”‚  â”‚  â”œâ”€ Ubuntu æ„å»ºå’Œæµ‹è¯•            â”‚ â”‚
â”‚  â”‚  â”œâ”€ macOS æ„å»ºå’Œæµ‹è¯•             â”‚ â”‚
â”‚  â”‚  â””â”€ Windows æ„å»ºå’Œæµ‹è¯•           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Job 2: code-quality              â”‚ â”‚
â”‚  â”‚  â””â”€ ä»£ç æ ¼å¼æ£€æŸ¥                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Job 3: summary                   â”‚ â”‚
â”‚  â”‚  â””â”€ ç”Ÿæˆæ‰§è¡Œæ‘˜è¦                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Job 4: release                   â”‚ â”‚
â”‚  â”‚  â””â”€ åˆ›å»ºGitHub Release          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (å®Œæˆåè‡ªåŠ¨è§¦å‘)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥ä½œæµ2: Publish Test Report          â”‚
â”‚  æ–‡ä»¶: publish-report.yml              â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Job: publish-report              â”‚ â”‚
â”‚  â”‚  â”œâ”€ ä¸‹è½½æ„å»ºäº§ç‰©                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ ç”ŸæˆHTMLæŠ¥å‘Š                 â”‚ â”‚
â”‚  â”‚  â””â”€ å‘å¸ƒåˆ°GitHub Pages          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    ç”¨æˆ·å¯è®¿é—®çš„æµ‹è¯•æŠ¥å‘Šç½‘é¡µ
```

---

## ğŸ“ å·¥ä½œæµè¯¦è§£

### 1ï¸âƒ£ **C++ CI/CD Pipeline** (`ci.yml`)

è¿™æ˜¯ä¸»è¦çš„CI/CDå·¥ä½œæµï¼Œè´Ÿè´£æ„å»ºã€æµ‹è¯•å’Œå‘å¸ƒã€‚

#### ğŸ“Œ è§¦å‘æ¡ä»¶

```yaml
on:
  push:
    branches: [ main, master ]      # æ¨é€åˆ°main/masteråˆ†æ”¯
  pull_request:
    branches: [ main, master ]      # åˆ›å»ºPRåˆ°main/master
  workflow_dispatch:                # æ‰‹åŠ¨è§¦å‘
```

**è§¦å‘æ–¹å¼ï¼š**
1. **è‡ªåŠ¨è§¦å‘** - æ¨é€ä»£ç åˆ°mainåˆ†æ”¯
2. **è‡ªåŠ¨è§¦å‘** - åˆ›å»ºPull Request
3. **æ‰‹åŠ¨è§¦å‘** - åœ¨GitHub Actionsé¡µé¢ç‚¹å‡» "Run workflow"

#### ğŸ¯ åŒ…å«çš„ä»»åŠ¡ï¼ˆJobsï¼‰

##### **Job 1: build-and-test**

å¹¶è¡Œåœ¨3ä¸ªå¹³å°ä¸Šæ„å»ºå’Œæµ‹è¯•ï¼š

```yaml
strategy:
  matrix:
    os: [ubuntu-latest, macos-latest, windows-latest]
```

**å…³é”®æ­¥éª¤ï¼š**
1. ğŸ“¥ æ£€å‡ºä»£ç 
2. ğŸ”§ å®‰è£…CMake
3. ğŸ› ï¸ å®‰è£…å¹³å°ä¾èµ–
4. âš™ï¸ é…ç½®CMake
5. ğŸ”¨ ç¼–è¯‘é¡¹ç›®
6. ğŸ§ª è¿è¡Œæµ‹è¯•
7. ğŸš€ è¿è¡Œä¸»ç¨‹åº
8. ğŸ“¦ ä¸Šä¼ æ„å»ºäº§ç‰©ï¼ˆArtifactsï¼‰

**çŸ©é˜µç­–ç•¥çš„ä¼˜åŠ¿ï¼š**
- âœ… åŒæ—¶åœ¨3ä¸ªå¹³å°ä¸Šæµ‹è¯•ï¼ŒèŠ‚çœæ—¶é—´
- âœ… ç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§
- âœ… å¤±è´¥éš”ç¦» (`fail-fast: false`)

##### **Job 2: code-quality**

ä»£ç è´¨é‡æ£€æŸ¥ï¼š

- ä½¿ç”¨ `clang-format` æ£€æŸ¥ä»£ç æ ¼å¼
- ä»…åœ¨ Ubuntu ä¸Šè¿è¡Œï¼ˆèŠ‚çœèµ„æºï¼‰
- å¯æ‰©å±•ä¸ºæ›´å¤šè´¨é‡æ£€æŸ¥ï¼ˆé™æ€åˆ†æã€Lintç­‰ï¼‰

##### **Job 3: summary**

ç”Ÿæˆæ‰§è¡Œæ‘˜è¦ï¼š

```yaml
needs: [build-and-test, code-quality]  # ä¾èµ–å‰ä¸¤ä¸ªä»»åŠ¡
if: always()                            # å³ä½¿å¤±è´¥ä¹Ÿè¿è¡Œ
```

- æ±‡æ€»æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œç»“æœ
- ç”Ÿæˆå¯è¯»æ€§å¼ºçš„æŠ¥å‘Š
- æ˜¾ç¤ºåœ¨GitHub Actionsçš„Summaryé¡µé¢

##### **Job 4: release**

è‡ªåŠ¨åˆ›å»ºReleaseï¼š

```yaml
if: startsWith(github.ref, 'refs/tags/v') || 
    (github.event_name == 'push' && github.ref == 'refs/heads/main')
```

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€ `v` å¼€å¤´çš„tagï¼ˆå¦‚ `v1.0.0`ï¼‰
- æˆ–æ¨é€åˆ°mainåˆ†æ”¯ï¼ˆè‡ªåŠ¨ç‰ˆæœ¬å·ï¼‰

**åŠŸèƒ½ï¼š**
1. ä¸‹è½½æ‰€æœ‰å¹³å°çš„æ„å»ºäº§ç‰©
2. æ‰“åŒ…æˆåˆ†å‘æ ¼å¼ï¼ˆ`.tar.gz` / `.zip`ï¼‰
3. ç”Ÿæˆç‰ˆæœ¬å·å’Œå‘å¸ƒè¯´æ˜
4. åˆ›å»ºGitHub Release
5. ä¸Šä¼ æ‰€æœ‰å¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶

---

### 2ï¸âƒ£ **Publish Test Report** (`publish-report.yml`)

ç”Ÿæˆå’Œå‘å¸ƒç²¾ç¾çš„HTMLæµ‹è¯•æŠ¥å‘Šã€‚

#### ğŸ“Œ è§¦å‘æ¡ä»¶

```yaml
on:
  workflow_run:
    workflows: ["C++ CI/CD Pipeline"]  # ç›‘å¬CI/CDå·¥ä½œæµ
    types:
      - completed                      # å®Œæˆæ—¶è§¦å‘
```

**è¯´æ˜ï¼š**
- è‡ªåŠ¨è§¦å‘ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- ç›‘å¬ "C++ CI/CD Pipeline" çš„å®Œæˆäº‹ä»¶
- æ— è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šè§¦å‘

#### ğŸ¯ ä¸»è¦åŠŸèƒ½

1. **ä¸‹è½½æ„å»ºäº§ç‰©**
   ```yaml
   uses: actions/download-artifact@v4
   with:
     run-id: ${{ github.event.workflow_run.id }}
   ```

2. **ç”ŸæˆHTMLæŠ¥å‘Š**
   - æå–æµ‹è¯•ç»“æœ
   - ç”Ÿæˆç²¾ç¾çš„ç½‘é¡µ
   - åŒ…å«çŠ¶æ€ã€æ—¶é—´ã€å¹³å°ä¿¡æ¯ç­‰

3. **å‘å¸ƒåˆ°GitHub Pages**
   ```yaml
   uses: peaceiris/actions-gh-pages@v3
   with:
     publish_dir: ./public
   ```

**è¾“å‡ºï¼š**
- ğŸ“Š åœ¨çº¿è®¿é—®ï¼š`https://tyk-lab.github.io/test-github-cicd/`
- ğŸ¨ ç²¾ç¾çš„å¯è§†åŒ–ç•Œé¢
- ğŸ“ˆ è¯¦ç»†çš„æµ‹è¯•ç»“æœå±•ç¤º

---

## ğŸ”§ å·¥ä½œæµæ–‡ä»¶ç»“æ„

æ¯ä¸ªå·¥ä½œæµæ–‡ä»¶éƒ½éµå¾ªç›¸åŒçš„ç»“æ„ï¼š

```yaml
# 1. å·¥ä½œæµåç§°
name: å·¥ä½œæµåç§°

# 2. è§¦å‘æ¡ä»¶
on:
  push:
    branches: [ main ]
  workflow_dispatch:

# 3. æƒé™é…ç½®ï¼ˆå¯é€‰ï¼‰
permissions:
  contents: write

# 4. ä»»åŠ¡å®šä¹‰
jobs:
  # ä»»åŠ¡1
  job-name-1:
    runs-on: ubuntu-latest
    steps:
      - name: æ­¥éª¤1
        run: echo "Hello"
      - name: æ­¥éª¤2
        uses: actions/checkout@v4
  
  # ä»»åŠ¡2ï¼ˆä¾èµ–ä»»åŠ¡1ï¼‰
  job-name-2:
    needs: [job-name-1]
    runs-on: ubuntu-latest
    steps:
      - name: æ­¥éª¤1
        run: echo "World"
```

---

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µè§£é‡Š

### ğŸ”¹ Workflowï¼ˆå·¥ä½œæµï¼‰

å®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå®šä¹‰åœ¨ `.yml` æ–‡ä»¶ä¸­ã€‚

### ğŸ”¹ Jobï¼ˆä»»åŠ¡ï¼‰

å·¥ä½œæµä¸­çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œå¯ä»¥åŒ…å«å¤šä¸ªæ­¥éª¤ã€‚

**ç‰¹ç‚¹ï¼š**
- é»˜è®¤å¹¶è¡Œæ‰§è¡Œ
- å¯ä»¥è®¾ç½®ä¾èµ–å…³ç³»ï¼ˆ`needs`ï¼‰
- å¯ä»¥åœ¨ä¸åŒçš„è™šæ‹Ÿæœºä¸Šè¿è¡Œ

### ğŸ”¹ Stepï¼ˆæ­¥éª¤ï¼‰

ä»»åŠ¡ä¸­çš„å…·ä½“æ“ä½œã€‚

**ä¸¤ç§ç±»å‹ï¼š**
1. **è¿è¡Œå‘½ä»¤** (`run`)
   ```yaml
   - name: ç¼–è¯‘ä»£ç 
     run: make build
   ```

2. **ä½¿ç”¨Action** (`uses`)
   ```yaml
   - name: æ£€å‡ºä»£ç 
     uses: actions/checkout@v4
   ```

### ğŸ”¹ Matrixï¼ˆçŸ©é˜µç­–ç•¥ï¼‰

ç”¨åŒä¸€å¥—æ­¥éª¤åœ¨å¤šä¸ªç¯å¢ƒä¸‹è¿è¡Œã€‚

```yaml
strategy:
  matrix:
    os: [ubuntu-latest, macos-latest, windows-latest]
    node: [14, 16, 18]
# è¿™å°†åˆ›å»º 3 Ã— 3 = 9 ä¸ªå¹¶è¡Œä»»åŠ¡
```

### ğŸ”¹ Artifactsï¼ˆæ„å»ºäº§ç‰©ï¼‰

ä»»åŠ¡ä¹‹é—´å…±äº«çš„æ–‡ä»¶ã€‚

```yaml
# ä¸Šä¼ 
- uses: actions/upload-artifact@v4
  with:
    name: my-artifact
    path: build/

# ä¸‹è½½
- uses: actions/download-artifact@v4
  with:
    name: my-artifact
```

---

## ğŸš€ å¦‚ä½•æ·»åŠ æ–°çš„å·¥ä½œæµ

### æ­¥éª¤1: åˆ›å»ºæ–‡ä»¶

åœ¨ `.github/workflows/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ `.yml` æ–‡ä»¶ï¼š

```bash
touch .github/workflows/my-workflow.yml
```

### æ­¥éª¤2: ç¼–å†™å·¥ä½œæµ

```yaml
name: My Custom Workflow

on:
  push:
    branches: [ main ]

jobs:
  my-job:
    runs-on: ubuntu-latest
    steps:
      - name: Hello World
        run: echo "Hello from my workflow!"
```

### æ­¥éª¤3: æäº¤å¹¶æ¨é€

```bash
git add .github/workflows/my-workflow.yml
git commit -m "feat: æ·»åŠ è‡ªå®šä¹‰å·¥ä½œæµ"
git push
```

### æ­¥éª¤4: æŸ¥çœ‹è¿è¡Œ

è®¿é—®ï¼š`https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/actions`

---

## ğŸ“ å¸¸ç”¨å·¥ä½œæµç¤ºä¾‹

### ç¤ºä¾‹1: å®šæ—¶ä»»åŠ¡

```yaml
name: Daily Report

on:
  schedule:
    - cron: '0 9 * * *'  # æ¯å¤©UTC 9:00è¿è¡Œ

jobs:
  report:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ç”Ÿæˆæ¯æ—¥æŠ¥å‘Š"
```

### ç¤ºä¾‹2: å¤šå·¥ä½œæµåä½œ

```yaml
# workflow-a.yml
name: Workflow A
on: push
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Building..."

---

# workflow-b.yml
name: Workflow B
on:
  workflow_run:
    workflows: ["Workflow A"]  # ç›‘å¬Workflow A
    types: [completed]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Deploying..."
```

### ç¤ºä¾‹3: æ¡ä»¶æ‰§è¡Œ

```yaml
jobs:
  deploy:
    runs-on: ubuntu-latest
    # åªåœ¨mainåˆ†æ”¯ä¸”æ¨é€äº‹ä»¶æ—¶è¿è¡Œ
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    steps:
      - run: echo "Deploying to production"
```

---

## ğŸ› ï¸ è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹æ—¥å¿—

- è¿›å…¥Actionsé¡µé¢
- ç‚¹å‡»å·¥ä½œæµè¿è¡Œè®°å½•
- å±•å¼€æ¯ä¸ªæ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### 2. æœ¬åœ°æµ‹è¯•

ä½¿ç”¨ [act](https://github.com/nektos/act) åœ¨æœ¬åœ°è¿è¡Œå·¥ä½œæµï¼š

```bash
# å®‰è£…act
brew install act  # macOS
choco install act  # Windows

# è¿è¡Œå·¥ä½œæµ
act push
```

### 3. è°ƒè¯•è¾“å‡º

```yaml
- name: è°ƒè¯•ä¿¡æ¯
  run: |
    echo "å½“å‰åˆ†æ”¯: ${{ github.ref }}"
    echo "äº‹ä»¶ç±»å‹: ${{ github.event_name }}"
    echo "è¿è¡ŒID: ${{ github.run_id }}"
    ls -la
    env | sort
```

### 4. ä½¿ç”¨tmateè°ƒè¯•

```yaml
- name: è¿›å…¥SSHè°ƒè¯•æ¨¡å¼
  uses: mxschmitt/action-tmate@v3
  if: failure()  # å¤±è´¥æ—¶æ‰è¿›å…¥
```

---

## ğŸ“– è¿›é˜¶ä¸»é¢˜

### ğŸ”¹ Secretç®¡ç†

å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼ˆAPIå¯†é’¥ã€å¯†ç ç­‰ï¼‰ï¼š

```yaml
steps:
  - name: ä½¿ç”¨Secret
    run: echo "API Key: ${{ secrets.API_KEY }}"
    env:
      API_KEY: ${{ secrets.API_KEY }}
```

**è®¾ç½®Secretï¼š**
`Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret`

### ğŸ”¹ ç¯å¢ƒå˜é‡

```yaml
env:
  GLOBAL_VAR: "å…¨å±€å˜é‡"

jobs:
  my-job:
    env:
      JOB_VAR: "ä»»åŠ¡å˜é‡"
    steps:
      - name: ä½¿ç”¨å˜é‡
        env:
          STEP_VAR: "æ­¥éª¤å˜é‡"
        run: |
          echo $GLOBAL_VAR
          echo $JOB_VAR
          echo $STEP_VAR
```

### ğŸ”¹ ç¼“å­˜ä¾èµ–

åŠ é€Ÿæ„å»ºï¼š

```yaml
- name: ç¼“å­˜ä¾èµ–
  uses: actions/cache@v3
  with:
    path: ~/.cache
    key: ${{ runner.os }}-build-${{ hashFiles('**/package-lock.json') }}
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæˆ‘çš„å·¥ä½œæµæ²¡æœ‰è¿è¡Œï¼Ÿ

**æ£€æŸ¥æ¸…å•ï¼š**
- âœ… æ–‡ä»¶åœ¨ `.github/workflows/` ç›®å½•ä¸‹
- âœ… æ–‡ä»¶æ‰©å±•åæ˜¯ `.yml` æˆ– `.yaml`
- âœ… YAMLè¯­æ³•æ­£ç¡®ï¼ˆä½¿ç”¨åœ¨çº¿éªŒè¯å™¨æ£€æŸ¥ï¼‰
- âœ… è§¦å‘æ¡ä»¶æ»¡è¶³

### Q2: å¦‚ä½•è®©å·¥ä½œæµåªåœ¨ç‰¹å®šæ–‡ä»¶æ”¹å˜æ—¶è¿è¡Œï¼Ÿ

```yaml
on:
  push:
    paths:
      - 'src/**'        # åªæœ‰srcç›®å½•æ”¹å˜æ—¶è§¦å‘
      - 'tests/**'
```

### Q3: å·¥ä½œæµè¿è¡Œæ—¶é—´è¿‡é•¿æ€ä¹ˆåŠï¼Ÿ

**ä¼˜åŒ–å»ºè®®ï¼š**
1. ä½¿ç”¨ç¼“å­˜ (`actions/cache`)
2. å¹¶è¡Œæ‰§è¡Œä»»åŠ¡
3. åªåœ¨å¿…è¦æ—¶è¿è¡Œï¼ˆ`if` æ¡ä»¶ï¼‰
4. ä½¿ç”¨è‡ªæ‰˜ç®¡Runnerï¼ˆself-hostedï¼‰

### Q4: å¦‚ä½•åœ¨Pull Requestä¸­è¿è¡Œå·¥ä½œæµï¼Ÿ

```yaml
on:
  pull_request:
    types: [opened, synchronize, reopened]
```

---

## ğŸ“Š ç›‘æ§å’Œé€šçŸ¥

### Slacké€šçŸ¥

```yaml
- name: å‘é€Slacké€šçŸ¥
  uses: 8398a7/action-slack@v3
  with:
    status: ${{ job.status }}
    webhook_url: ${{ secrets.SLACK_WEBHOOK }}
  if: always()
```

### é‚®ä»¶é€šçŸ¥

GitHubé»˜è®¤ä¼šå‘é€å¤±è´¥é€šçŸ¥é‚®ä»¶åˆ°ä½ çš„é‚®ç®±ã€‚

å¯ä»¥åœ¨ä¸ªäººè®¾ç½®ä¸­é…ç½®ï¼š
`Settings â†’ Notifications â†’ GitHub Actions`

---

## ğŸ¯ æœ€ä½³å®è·µ

1. âœ… **å‘½åæ¸…æ™°** - ä½¿ç”¨æè¿°æ€§çš„å·¥ä½œæµã€ä»»åŠ¡å’Œæ­¥éª¤åç§°
2. âœ… **æ·»åŠ æ³¨é‡Š** - è§£é‡Šå¤æ‚çš„é€»è¾‘
3. âœ… **ä½¿ç”¨çŸ©é˜µ** - å‡å°‘é‡å¤ä»£ç 
4. âœ… **è®¾ç½®è¶…æ—¶** - é˜²æ­¢ä»»åŠ¡æ— é™è¿è¡Œ
   ```yaml
   jobs:
     my-job:
       timeout-minutes: 30
   ```
5. âœ… **å¤±è´¥å¤„ç†** - ä½¿ç”¨ `continue-on-error` å’Œ `if: always()`
6. âœ… **å®‰å…¨ç¬¬ä¸€** - æ•æ„Ÿä¿¡æ¯ä½¿ç”¨Secretsï¼Œä¸è¦ç¡¬ç¼–ç 
7. âœ… **ç‰ˆæœ¬å›ºå®š** - Actionsä½¿ç”¨ç‰¹å®šç‰ˆæœ¬ï¼ˆå¦‚ `@v4`ï¼‰
8. âœ… **æ–‡æ¡£åŒ–** - åœ¨READMEä¸­è¯´æ˜å·¥ä½œæµçš„ä½œç”¨

---

## ğŸ“š å‚è€ƒèµ„æº

- [GitHub Actionså®˜æ–¹æ–‡æ¡£](https://docs.github.com/en/actions)
- [å·¥ä½œæµè¯­æ³•å‚è€ƒ](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
- [Actionså¸‚åœº](https://github.com/marketplace?type=actions)
- [Awesome Actions](https://github.com/sdras/awesome-actions)

---

## ğŸ‰ æ€»ç»“

æœ¬é¡¹ç›®çš„å·¥ä½œæµç³»ç»Ÿå±•ç¤ºäº†ï¼š

1. âœ… **å¤šå¹³å°CI/CD** - åŒæ—¶åœ¨3ä¸ªæ“ä½œç³»ç»Ÿä¸Šæ„å»ºæµ‹è¯•
2. âœ… **è‡ªåŠ¨åŒ–å‘å¸ƒ** - è‡ªåŠ¨åˆ›å»ºReleaseå¹¶ä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶
3. âœ… **å¯è§†åŒ–æŠ¥å‘Š** - ç”Ÿæˆç²¾ç¾çš„HTMLæµ‹è¯•æŠ¥å‘Š
4. âœ… **å·¥ä½œæµåä½œ** - å¤šä¸ªå·¥ä½œæµç›¸äº’è§¦å‘å’Œåä½œ
5. âœ… **å®Œæ•´æ–‡æ¡£** - è¯¦ç»†çš„æ³¨é‡Šå’Œè¯´æ˜

é€šè¿‡å­¦ä¹ è¿™äº›å·¥ä½œæµï¼Œä½ å¯ä»¥ï¼š
- ğŸ“ ç†è§£GitHub Actionsçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ› ï¸ åˆ›å»ºè‡ªå·±çš„è‡ªåŠ¨åŒ–æµç¨‹
- ğŸš€ æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡
- ğŸ“Š å®ç°CI/CDæœ€ä½³å®è·µ

**å¼€å§‹ä½ çš„è‡ªåŠ¨åŒ–ä¹‹æ—…å§ï¼** ğŸš€
